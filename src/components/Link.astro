---
import { Icon } from "astro-icon/components";

interface Props {
  href: string;
  class?: string;
}

const { href, class: className = "" } = Astro.props;
const isExternal = href.startsWith("http");
const isInternal = href.startsWith("/");
const base = import.meta.env.BASE_URL === "/" ? "" : import.meta.env.BASE_URL;
const url = isInternal ? `${base}${href}` : href;
---

<a
  href={url}
  class={`kern-link text-link ${className}`}
  {...isExternal ? { target: "_blank", rel: "noopener noreferrer" } : {}}
  ><slot />{
    isExternal && (
      <Icon
        name="ic:twotone-open-in-new"
        class="mb-1 ml-2 inline no-underline"
      />
    )
  }</a
>

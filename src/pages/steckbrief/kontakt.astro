---
import Hero from "@/components/Hero.astro";
import Layout from "@/layouts/Layout.astro";
import Input from "@/components/input/Input.astro";
import Textarea from "@/components/input/Textarea.astro";
import { ZFL_EMAIL } from "@/config/constants";

export const frontmatter = {
  title: "Steckbrief",
  sitemap: true,
};
---

<Layout title={frontmatter.title}>
  <main class="breakout-grid">
    <Hero>
      <h1>Steckbrief starten</h1>
      <p>
        Lorem Ipsum is simply dummy text of the printing and typesetting
        industry. Lorem Ipsum has been the industry's standard dummy text ever
        since the 1500s, when an unknown printer took a galley of type and
        scrambled it to make a type specimen book.
      </p>
    </Hero>
    <section class="space-y-40 py-80">
      <div>
        <h2 class="mb-16 font-normal">Kontaktformular</h2>
        <p>
          Lorem Ipsum is simply dummy text of the printing and typesetting
          industry. Lorem Ipsum has been the industry's standard dummy text ever
          since the 1500s, when an unknown printer took a galley of type and
          scrambled it to make a type specimen book.
        </p>
      </div>

      <div class="max-w-a11y space-y-24">
        <p class="text-xl">Ihre Kontaktdaten</p>
        <div class="flex gap-24">
          <Input id="ressort" label="Ressort" />
          <Input id="referat" label="Referat aus ihrem Profil" />
        </div>
        <Input id="rechtsbereich" label="Ihr Rechtsbereich" />
      </div>

      <div class="max-w-a11y space-y-24">
        <Textarea
          id="kontext"
          label="Ihre Anfrage"
          description="Geben Sie den Titel und Kontext des Vorhabens an"
          maxlength={1000}
        />
      </div>

      <div class="max-w-a11y space-y-24">
        <Input id="mail" label="Ihre E-Mail-Adresse" />
      </div>

      <div>
        <p class="mb-16 text-2xl">
          HÃ¤ngen Sie relevante Doukmente an die E-Mail an
        </p>
        <p>
          Lorem Ipsum is simply dummy text of the printing and typesetting
          industry. Lorem Ipsum has been the industry's standard dummy text ever
          since the 1500s, when an unknown printer took a galley of type and
          scrambled it to make a type specimen book.
        </p>
      </div>
      <div class="flex gap-16">
        <button id="kontakt-btn" type="button" class="btn btn-primary">
          Kontakt aufnehmen
        </button>
      </div>
    </section>
  </main>
</Layout>

<script define:vars={{ email: ZFL_EMAIL.display }}>
  document.getElementById("kontakt-btn")?.addEventListener("click", () => {
    const getValue = (/** @type {string} */ id) =>
      /** @type {HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement | null} */ (
        document.getElementById(id)
      )?.value ?? "";

    const ressort = getValue("ressort");
    const referat = getValue("referat");
    const rechtsbereich = getValue("rechtsbereich");
    const kontext = getValue("kontext");
    const mail = getValue("mail");

    const body = [
      ressort && `Ressort: ${ressort}`,
      referat && `Referat: ${referat}`,
      rechtsbereich && `Rechtsbereich: ${rechtsbereich}`,
      kontext && `Anfrage:\n${kontext}`,
      mail && `E-Mail: ${mail}`,
    ]
      .filter(Boolean)
      .join("\n\n");

    const params = new URLSearchParams();
    params.append("subject", "Anfrage Steckbrief");
    if (mail) params.append("cc", mail);
    if (body) params.append("body", body);

    window.location.href =
      `mailto:${email}?` + params.toString().replace(/\+/g, "%20");
  });
</script>
